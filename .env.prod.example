# ============================================================
# AntiHub Production Environment Variables
# Copy this file to .env.prod and fill in real values:
#   cp .env.prod.example .env.prod
# NEVER commit .env.prod to git.
# ============================================================

# --- App Environment ---
# REQUIRED: triggers production-safe defaults (CORS validation, proxy bypass)
APP_ENV=production
API_HOST=0.0.0.0
PUBLIC_HOST=zenplat.top

# --- Public URL ---
# REQUIRED in production (app refuses to start without these)
VITE_API_BASE_URL=https://zenplat.top
CORS_ORIGINS=https://zenplat.top

# --- Proxy ---
# US server connects directly; do NOT set HTTP_PROXY / HTTPS_PROXY.
# APP_ENV=production auto-bypasses any accidental proxy env-vars.

# --- Database ---
# REQUIRED in production (docker-compose fails fast if unset)
DATABASE_URL=postgresql+psycopg2://antihub:CHANGE_ME@db:5432/antihub
POSTGRES_DB=antihub
POSTGRES_USER=antihub
POSTGRES_PASSWORD=CHANGE_ME

# --- Auth / JWT ---
SECRET_KEY=CHANGE_ME_RANDOM_HEX_32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=43200
AUTH_TOKEN_SECRET=CHANGE_ME_RANDOM_HEX_32

# --- Initial Admin ---
PROD_ADMIN_USERNAME=admin
PROD_ADMIN_PASSWORD=CHANGE_ME
ROOT_ADMIN_USERNAME=root
ROOT_ADMIN_PASSWORD=CHANGE_ME
ROOT_ADMIN_FORCE_SYNC=true
STARTUP_BOOTSTRAP_ENABLED=true

# --- LLM / AI ---
OPENAI_API_KEY=sk-CHANGE_ME
OPENAI_BASE_URL=https://api.deepseek.com/v1
OPENAI_MODEL=deepseek-chat

# --- Payment / WechatPay ---
# REQUIRED when PAYMENT_PROVIDER=wechatpay (launch provider)
PAYMENT_PROVIDER=wechatpay
PAYMENT_WEBHOOK_SECRET=CHANGE_ME_RANDOM_HEX_32

# Checkout: merchant → WeChat Pay
WECHATPAY_NOTIFY_URL=https://zenplat.top/api/billing/webhooks/wechatpay
WECHATPAY_MCHID=CHANGE_ME
WECHATPAY_APPID=CHANGE_ME
WECHATPAY_CERT_SERIAL=CHANGE_ME
WECHATPAY_PRIVATE_KEY_PATH=/app/certs/apiclient_key.pem
# WECHATPAY_PRIVATE_KEY_PEM=             # alternative: inline PEM (not recommended for prod)

# Webhook verification: WeChat Pay → merchant
WECHATPAY_APIV3_KEY=CHANGE_ME_32_BYTES
WECHATPAY_PLATFORM_CERT_SERIAL=CHANGE_ME
WECHATPAY_PLATFORM_CERT_PATH=/app/certs/wechatpay_platform.pem
# WECHATPAY_PLATFORM_CERT_PEM=           # alternative: inline PEM
# WECHATPAY_PLATFORM_CERTS_JSON=         # alternative: JSON map {"SERIAL":"PEM"}

# --- Cloudflare Tunnel ---
TUNNEL_TOKEN=CHANGE_ME

# --- Celery / Redis ---
# REDIS_URL=redis://redis:6379/0      # default from compose
# CELERY_CONCURRENCY=2                 # worker parallelism
# CELERY_MAX_TASKS=50                  # recycle worker after N tasks

# --- Gunicorn ---
# GUNICORN_WORKERS=4
# GUNICORN_TIMEOUT=120
